{"version":3,"file":"js/29.b08bd19b.js","mappings":"0MAGIA,MAAM,qBACNC,MAAA,sqB,GAQKD,MAAM,a,GAGNA,MAAM,wD,GACJA,MAAM,oC,GACJA,MAAM,Y,GACJA,MAAM,sC,GACTE,EAAAA,EAAAA,GAA2C,MAAvCF,MAAM,yBAAwB,QAAI,G,GAE/BA,MAAM,sB,GAeTE,EAAAA,EAAAA,GAAgC,SAAzBC,IAAI,YAAW,MAAE,G,GAErBH,MAAM,sB,GAeTE,EAAAA,EAAAA,GAAgC,SAAzBC,IAAI,YAAW,MAAE,G,GAE1BD,EAAAA,EAAAA,GAOM,OAPDF,MAAM,eAAa,EACtBE,EAAAA,EAAAA,GAKS,UAJPE,KAAK,SACLJ,MAAM,6BACP,UAED,G,oNA5DdK,EAAAA,EAAAA,IAAiCC,EAAA,CAApBC,OAAQC,EAAAC,WAAS,oBAC9BP,EAAAA,EAAAA,GAkEM,MAlENQ,EAkEM,EAzDJL,EAAAA,EAAAA,IAAgCM,EAAA,CAAjBC,SAAS,KACxBV,EAAAA,EAAAA,GAEM,MAFNW,EAEM,EADJR,EAAAA,EAAAA,IAAYS,MAEdZ,EAAAA,EAAAA,GAoDM,MApDNa,EAoDM,EAnDJb,EAAAA,EAAAA,GAkDM,MAlDNc,EAkDM,EAjDJd,EAAAA,EAAAA,GAgDM,MAhDNe,EAgDM,EA/CJf,EAAAA,EAAAA,GA8CM,MA9CNgB,EA8CM,CA7CJC,GACAd,EAAAA,EAAAA,IA2CQe,EAAA,CA3CoBC,SAAQC,EAAAC,QAAM,C,kBACxC,EADeC,YAAM,EACrBtB,EAAAA,EAAAA,GAgBM,MAhBNuB,EAgBM,EAfJpB,EAAAA,EAAAA,IASEqB,EAAA,CARAtB,KAAK,QACLuB,KAAK,QACLC,GAAG,WACH5B,OAAK6B,EAAAA,EAAAA,IAAA,CAAC,eAAc,cACIL,EAAO,YAC/BM,MAAM,iB,WACGtB,EAAAuB,KAAKC,S,qCAALxB,EAAAuB,KAAKC,SAAQC,GACtBC,YAAY,S,gCAEd7B,EAAAA,EAAAA,IAGE8B,EAAA,CAFAR,KAAK,QACL3B,MAAM,qBAERoC,KAEFlC,EAAAA,EAAAA,GAgBM,MAhBNmC,EAgBM,EAfJhC,EAAAA,EAAAA,IASEqB,EAAA,CARAtB,KAAK,WACLuB,KAAK,WACLC,GAAG,WACH5B,OAAK6B,EAAAA,EAAAA,IAAA,CAAC,eAAc,cACIL,EAAO,eAC/BM,MAAM,W,WACGtB,EAAAuB,KAAKO,S,qCAAL9B,EAAAuB,KAAKO,SAAQL,GACtBC,YAAY,S,gCAEd7B,EAAAA,EAAAA,IAGE8B,EAAA,CAFAR,KAAK,WACL3B,MAAM,qBAERuC,IAEFC,K,6EAoBd,GACEC,IAAAA,GACE,MAAO,CACLV,KAAM,CACJC,SAAU,GACVM,SAAU,IAEZ7B,WAAW,EAEf,EACAiC,WAAY,CACVC,aAAY,IACZC,UAASA,EAAAA,GAEXC,OAAAA,GACE,MAAO,CACLC,QAAOA,EAAAA,EAEX,EACAC,QAAS,CACPxB,MAAAA,GACEyB,KAAKvC,WAAY,EACjB,MAAMwC,EAAa,oDACnBD,KAAKE,MACFC,KAAKF,EAAWD,KAAKjB,MACrBqB,MAAMC,IACL,GAAIA,EAAIZ,KAAKa,QAAS,CACpB,MAAM,MAAEC,EAAK,QAAEC,GAAYH,EAAIZ,KAC/BgB,SAASC,OAAU,YAAWH,cAAkB,IAAII,KAAKH,KACzDR,KAAKY,QAAQC,KAAK,yBACpB,MACEf,EAAAA,EAAQgB,KAAK,UAAW,CACtBC,QAASV,EAAIZ,KAAKsB,QAClBC,OAAQ,UAEVhB,KAAKjB,KAAKO,SAAW,GAEvBU,KAAKvC,WAAY,CAAI,IAEtBwD,OAAOC,IACNlB,KAAKvC,WAAY,EACjBqC,EAAAA,EAAQgB,KAAK,UAAW,CACtBC,QAAU,QAAOG,KACjBF,OAAQ,SACR,GAER,GAEFG,OAAAA,GACE,MAAMC,EAAa,sDACbC,EAAaZ,SAASC,OACzBY,MAAM,MACNC,MAAMC,GAAQA,EAAIC,WAAW,gBAC5BH,MAAM,KAAK,GACftB,KAAKE,MAAMwB,SAASC,QAAQC,OAAOC,cAAgBR,EACnDrB,KAAKvC,WAAY,EACjBuC,KAAKE,MAAMC,KAAKiB,GAAWhB,MAAMC,IAC/BL,KAAKvC,WAAY,EACb4C,EAAIZ,KAAKa,SACXN,KAAKY,QAAQC,KAAK,yBACpB,GAEJ,G,QCpIF,MAAMiB,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://project_macaron/./src/views/DashBoard/LoginView.vue","webpack://project_macaron/./src/views/DashBoard/LoginView.vue?d51a"],"sourcesContent":["<template>\r\n  <LoadingVue :active=\"isLoading\"/>\r\n  <div\r\n    class=\"d-flex flex-column\"\r\n    style=\"\r\n      min-height: 100vh;\r\n      background-image: url(https://storage.googleapis.com/vue-course-api.appspot.com/nn_macaron/1702358864882.jpg?GoogleAccessId=firebase-adminsdk-zzty7%40vue-course-api.iam.gserviceaccount.com&Expires=1742169600&Signature=oM5TlSijR1vMNQtYmYXOgbLaJQwl0Gz0VQlpJHkw9XwQwd07M5TaVY4Pnf5%2FktT0Ed9LGOWT0elHG0Ht1j61QA13HJ7fpBLPf03umSWsrWA5R6fG5Bhmu7prV%2F%2Byq8UwxbpxmpiQgIthdn0c%2BDh6BpflGLEq%2B7N50H%2F7d2mOtrC5BtJjWfH75FUvM%2FwtOEK1yjztL7F1Diam5%2F5sOypANcDa0wIIuCBQN95mfDbzNY0Fc17sCrdapxrQAJprZWySXLk1uR%2FxQ5yBAY5UJxY9bEUy7a4BgsHeT9BO7EabgfBvnUhPzE%2BS%2BuIkWvEiulvytWA2eiZlxSPlUDECHa8pSQ%3D%3D);\r\n      background-size: cover;\r\n      background-position: top center;\r\n    \"\r\n  >\r\n    <DashBoardNav :isLogin=\"false\"/>\r\n    <div class=\"container\">\r\n      <ToastList/>\r\n    </div>\r\n    <div class=\"container py-5 flex-grow-1 d-flex align-items-center\">\r\n      <div class=\"row w-100 justify-content-center\">\r\n        <div class=\"col-lg-5\">\r\n          <div class=\"p-3 bg-light bg-opacity-25 rounded\">\r\n            <h2 class=\"mt-2 mb-3 text-center\">後台登入</h2>\r\n            <VForm v-slot=\"{ errors }\" @submit=\"submit\">\r\n              <div class=\"form-floating mb-4\">\r\n                <VField\r\n                  type=\"email\"\r\n                  name=\"email\"\r\n                  id=\"username\"\r\n                  class=\"form-control\"\r\n                  :class=\"{ 'is-invalid': errors['email'] }\"\r\n                  rules=\"email|required\"\r\n                  v-model=\"user.username\"\r\n                  placeholder=\"請輸入帳號\"\r\n                />\r\n                <ErrorMessage\r\n                  name=\"email\"\r\n                  class=\"invalid-feedback\"\r\n                />\r\n                <label for=\"username\">帳號</label>\r\n              </div>\r\n              <div class=\"form-floating mb-4\">\r\n                <VField\r\n                  type=\"password\"\r\n                  name=\"password\"\r\n                  id=\"password\"\r\n                  class=\"form-control\"\r\n                  :class=\"{ 'is-invalid': errors['password'] }\"\r\n                  rules=\"required\"\r\n                  v-model=\"user.password\"\r\n                  placeholder=\"請輸入帳號\"\r\n                />\r\n                <ErrorMessage\r\n                  name=\"password\"\r\n                  class=\"invalid-feedback\"\r\n                />\r\n                <label for=\"password\">密碼</label>\r\n              </div>\r\n              <div class=\"text-center\">\r\n                <button\r\n                  type=\"submit\"\r\n                  class=\"btn bg-primary text-white\"\r\n                >\r\n                  登入\r\n                </button>\r\n              </div>\r\n            </VForm>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport DashBoardNav from '@/components/DashBoardNav.vue'\r\nimport ToastList from '@/components/ToastList.vue'\r\nimport emitter from '@/methods/emitter.js'\r\nexport default {\r\n  data() {\r\n    return {\r\n      user: {\r\n        username: '',\r\n        password: ''\r\n      },\r\n      isLoading: false\r\n    }\r\n  },\r\n  components: {\r\n    DashBoardNav,\r\n    ToastList\r\n  },\r\n  provide() {\r\n    return {\r\n      emitter\r\n    }\r\n  },\r\n  methods: {\r\n    submit() {\r\n      this.isLoading = true\r\n      const API_LOGIN = `${process.env.VUE_APP_API}admin/signin`\r\n      this.axios\r\n        .post(API_LOGIN, this.user)\r\n        .then((res) => {\r\n          if (res.data.success) {\r\n            const { token, expired } = res.data\r\n            document.cookie = `webToken=${token}; expires=${new Date(expired)}`\r\n            this.$router.push('/dashboard/salesReport')\r\n          } else {\r\n            emitter.emit('sendMsg', {\r\n              message: res.data.message,\r\n              status: 'error'\r\n            })\r\n            this.user.password = ''\r\n          }\r\n          this.isLoading = false\r\n        })\r\n        .catch((e) => {\r\n          this.isLoading = false\r\n          emitter.emit('sendMsg', {\r\n            message: `登入失敗(${e})`,\r\n            status: 'error'\r\n          })\r\n        })\r\n    }\r\n  },\r\n  mounted() {\r\n    const API_CHECK = `${process.env.VUE_APP_API}api/user/check`\r\n    const AUTH_TOKEN = document.cookie\r\n      .split('; ')\r\n      .find((row) => row.startsWith('webToken='))\r\n      ?.split('=')[1]\r\n    this.axios.defaults.headers.common.Authorization = AUTH_TOKEN\r\n    this.isLoading = true\r\n    this.axios.post(API_CHECK).then((res) => {\r\n      this.isLoading = false\r\n      if (res.data.success) {\r\n        this.$router.push('/dashboard/salesReport')\r\n      }\r\n    })\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./LoginView.vue?vue&type=template&id=ff181e80\"\nimport script from \"./LoginView.vue?vue&type=script&lang=js\"\nexport * from \"./LoginView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","style","_createElementVNode","for","type","_createVNode","_component_LoadingVue","active","$data","isLoading","_hoisted_1","_component_DashBoardNav","isLogin","_hoisted_2","_component_ToastList","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_component_VForm","onSubmit","$options","submit","errors","_hoisted_8","_component_VField","name","id","_normalizeClass","rules","user","username","$event","placeholder","_component_ErrorMessage","_hoisted_9","_hoisted_10","password","_hoisted_11","_hoisted_12","data","components","DashBoardNav","ToastList","provide","emitter","methods","this","API_LOGIN","axios","post","then","res","success","token","expired","document","cookie","Date","$router","push","emit","message","status","catch","e","mounted","API_CHECK","AUTH_TOKEN","split","find","row","startsWith","defaults","headers","common","Authorization","__exports__","render"],"sourceRoot":""}