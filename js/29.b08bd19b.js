"use strict";(self["webpackChunkproject_macaron"]=self["webpackChunkproject_macaron"]||[]).push([[29],{3833:function(s,e,a){a.r(e),a.d(e,{default:function(){return y}});var t=a(3396),o=a(7139);const i={class:"d-flex flex-column",style:{"min-height":"100vh","background-image":"url(https://storage.googleapis.com/vue-course-api.appspot.com/nn_macaron/1702358864882.jpg?GoogleAccessId=firebase-adminsdk-zzty7%40vue-course-api.iam.gserviceaccount.com&Expires=1742169600&Signature=oM5TlSijR1vMNQtYmYXOgbLaJQwl0Gz0VQlpJHkw9XwQwd07M5TaVY4Pnf5%2FktT0Ed9LGOWT0elHG0Ht1j61QA13HJ7fpBLPf03umSWsrWA5R6fG5Bhmu7prV%2F%2Byq8UwxbpxmpiQgIthdn0c%2BDh6BpflGLEq%2B7N50H%2F7d2mOtrC5BtJjWfH75FUvM%2FwtOEK1yjztL7F1Diam5%2F5sOypANcDa0wIIuCBQN95mfDbzNY0Fc17sCrdapxrQAJprZWySXLk1uR%2FxQ5yBAY5UJxY9bEUy7a4BgsHeT9BO7EabgfBvnUhPzE%2BS%2BuIkWvEiulvytWA2eiZlxSPlUDECHa8pSQ%3D%3D)","background-size":"cover","background-position":"top center"}},r={class:"container"},n={class:"container py-5 flex-grow-1 d-flex align-items-center"},l={class:"row w-100 justify-content-center"},d={class:"col-lg-5"},u={class:"p-3 bg-light bg-opacity-25 rounded"},c=(0,t._)("h2",{class:"mt-2 mb-3 text-center"},"後台登入",-1),m={class:"form-floating mb-4"},p=(0,t._)("label",{for:"username"},"帳號",-1),h={class:"form-floating mb-4"},g=(0,t._)("label",{for:"password"},"密碼",-1),f=(0,t._)("div",{class:"text-center"},[(0,t._)("button",{type:"submit",class:"btn bg-primary text-white"}," 登入 ")],-1);function v(s,e,a,v,b,w){const x=(0,t.up)("LoadingVue"),k=(0,t.up)("DashBoardNav"),_=(0,t.up)("ToastList"),L=(0,t.up)("VField"),y=(0,t.up)("ErrorMessage"),B=(0,t.up)("VForm");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(x,{active:b.isLoading},null,8,["active"]),(0,t._)("div",i,[(0,t.Wm)(k,{isLogin:!1}),(0,t._)("div",r,[(0,t.Wm)(_)]),(0,t._)("div",n,[(0,t._)("div",l,[(0,t._)("div",d,[(0,t._)("div",u,[c,(0,t.Wm)(B,{onSubmit:w.submit},{default:(0,t.w5)((({errors:s})=>[(0,t._)("div",m,[(0,t.Wm)(L,{type:"email",name:"email",id:"username",class:(0,o.C_)(["form-control",{"is-invalid":s["email"]}]),rules:"email|required",modelValue:b.user.username,"onUpdate:modelValue":e[0]||(e[0]=s=>b.user.username=s),placeholder:"請輸入帳號"},null,8,["class","modelValue"]),(0,t.Wm)(y,{name:"email",class:"invalid-feedback"}),p]),(0,t._)("div",h,[(0,t.Wm)(L,{type:"password",name:"password",id:"password",class:(0,o.C_)(["form-control",{"is-invalid":s["password"]}]),rules:"required",modelValue:b.user.password,"onUpdate:modelValue":e[1]||(e[1]=s=>b.user.password=s),placeholder:"請輸入帳號"},null,8,["class","modelValue"]),(0,t.Wm)(y,{name:"password",class:"invalid-feedback"}),g]),f])),_:1},8,["onSubmit"])])])])])])],64)}a(560);var b=a(5331),w=a(2115),x=a(8557),k={data(){return{user:{username:"",password:""},isLoading:!1}},components:{DashBoardNav:b.Z,ToastList:w.Z},provide(){return{emitter:x.Z}},methods:{submit(){this.isLoading=!0;const s="https://vue3-course-api.hexschool.io/admin/signin";this.axios.post(s,this.user).then((s=>{if(s.data.success){const{token:e,expired:a}=s.data;document.cookie=`webToken=${e}; expires=${new Date(a)}`,this.$router.push("/dashboard/salesReport")}else x.Z.emit("sendMsg",{message:s.data.message,status:"error"}),this.user.password="";this.isLoading=!1})).catch((s=>{this.isLoading=!1,x.Z.emit("sendMsg",{message:`登入失敗(${s})`,status:"error"})}))}},mounted(){const s="https://vue3-course-api.hexschool.io/api/user/check",e=document.cookie.split("; ").find((s=>s.startsWith("webToken=")))?.split("=")[1];this.axios.defaults.headers.common.Authorization=e,this.isLoading=!0,this.axios.post(s).then((s=>{this.isLoading=!1,s.data.success&&this.$router.push("/dashboard/salesReport")}))}},_=a(89);const L=(0,_.Z)(k,[["render",v]]);var y=L}}]);
//# sourceMappingURL=29.b08bd19b.js.map