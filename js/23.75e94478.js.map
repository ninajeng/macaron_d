{"version":3,"file":"js/23.75e94478.js","mappings":"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","sources":["webpack://project_macaron/./src/views/DashBoard/OrderList.vue","webpack://project_macaron/./src/components/OrderModal.vue","webpack://project_macaron/./src/components/OrderModal.vue?b91a","webpack://project_macaron/./src/views/DashBoard/OrderList.vue?6ffe"],"sourcesContent":["<template>\r\n  <LoadingVue :active=\"isLoading\" style=\"z-index: 1056\"/>\r\n  <OrderModal :temp-order=\"tempOrder\" @update-order=\"updateOrder\" ref=\"orderModal\"/>\r\n  <DeleteModal\r\n    ref=\"deleteModal\"\r\n    :delete-item=\"deleteOrder\"\r\n    :item=\"'訂單'\"\r\n    @delete=\"deleteId\"\r\n  />\r\n  <div class=\"pt-4 mb-3\">\r\n    <h2 class=\"m-0 fw-bolder\">訂單列表</h2>\r\n  </div>\r\n  <div class=\"overflow-x-auto mb-3\">\r\n    <table class=\"table table-hover align-middle text-nowrap\">\r\n      <thead>\r\n        <tr>\r\n          <th>訂單日期</th>\r\n          <th>訂單編號</th>\r\n          <th>訂單狀態</th>\r\n          <th>訂購人</th>\r\n          <th>使用優惠券</th>\r\n          <th class=\"text-end\">訂單金額</th>\r\n          <th width=\"250\" class=\"text-center\">查看內容/刪除</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody v-if=\"orderList.length > 0\">\r\n        <tr v-for=\"order in orderList\" :key=\"order.id\">\r\n          <td>{{ $filters.unixToDate(order.create_at) }}</td>\r\n          <td>{{ order.id }}</td>\r\n          <td :class=\"{'text-danger': !order.is_paid}\">{{ order.is_paid ? '訂單已完成' : '尚未付款' }}</td>\r\n          <td>{{ order.user.name }}</td>\r\n          <td>{{ Object.values(order.products)[0].coupon ? Object.values(order.products)[0].coupon.title: '無' }}</td>\r\n          <td class=\"text-end\">{{ `$${$filters.currency(order.total)}` }}</td>\r\n          <td class=\"text-center\">\r\n            <div\r\n              class=\"btn-group btn-group-sm\"\r\n              role=\"group\"\r\n              aria-label=\"Basic example\"\r\n            >\r\n              <button\r\n                type=\"button\"\r\n                class=\"btn btn-outline-success\"\r\n                @click=\"editOrder(order)\"\r\n              >\r\n              查看內容\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                class=\"btn btn-outline-danger\"\r\n                @click=\"deleteConfirm(order)\"\r\n              >\r\n                刪除\r\n              </button>\r\n            </div>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n  <Pagination :page-info=\"pageInfo\" @set-page=\"getOrderList\"/>\r\n</template>\r\n\r\n<script>\r\nimport OrderModal from '@/components/OrderModal.vue'\r\nimport DeleteModal from '@/components/DelModal.vue'\r\nimport Pagination from '@/components/PaginationItem.vue'\r\nexport default {\r\n  data() {\r\n    return {\r\n      orderList: [],\r\n      tempOrder: {},\r\n      deleteOrder: {},\r\n      isLoading: false,\r\n      pageInfo: {}\r\n    }\r\n  },\r\n  components: {\r\n    OrderModal,\r\n    DeleteModal,\r\n    Pagination\r\n  },\r\n  inject: ['emitter'],\r\n  methods: {\r\n    getOrderList(page = 1) {\r\n      this.isLoading = true\r\n      window.scrollTo({ top: 0 })\r\n      const API_GETORDER = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/orders?page=${page}`\r\n      this.axios\r\n        .get(API_GETORDER)\r\n        .then((res) => {\r\n          if (!res.data.success) {\r\n            this.emitter.emit('sendMsg', {\r\n              message: `訂單讀取失敗：${res.data.message}`,\r\n              status: 'error'\r\n            })\r\n          } else {\r\n            this.orderList = res.data.orders\r\n            this.pageInfo = res.data.pagination\r\n          }\r\n          this.isLoading = false\r\n        })\r\n        .catch((e) => {\r\n          this.isLoading = false\r\n          this.emitter.emit('sendMsg', {\r\n            message: `訂單讀取失敗：${e}`,\r\n            status: 'error'\r\n          })\r\n        })\r\n    },\r\n    deleteConfirm(order) {\r\n      this.deleteOrder = order\r\n      this.$refs.deleteModal.showModal()\r\n    },\r\n    editOrder(order) {\r\n      this.tempOrder = order\r\n      this.$refs.orderModal.showModal()\r\n    },\r\n    deleteId() {\r\n      this.isLoading = true\r\n      this.$refs.deleteModal.hideModal()\r\n      const API_DELETEORDER = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/order/${this.deleteOrder.id}`\r\n      this.axios\r\n        .delete(API_DELETEORDER)\r\n        .then((res) => {\r\n          if (!res.data.success) {\r\n            this.emitter.emit('sendMsg', {\r\n              message: `訂單刪除失敗：${res.data.message}`,\r\n              status: 'error'\r\n            })\r\n          } else {\r\n            this.emitter.emit('sendMsg', {\r\n              message: '訂單已刪除',\r\n              status: 'success'\r\n            })\r\n          }\r\n          this.getOrderList(this.pageInfo.current_page)\r\n        })\r\n        .catch((e) => {\r\n          this.isLoading = false\r\n          this.emitter.emit('sendMsg', {\r\n            message: `訂單刪除失敗：${e}`,\r\n            status: 'error'\r\n          })\r\n        })\r\n    },\r\n    updateOrder(order) {\r\n      const data = JSON.parse(JSON.stringify(order))\r\n      data.is_paid = !data.is_paid\r\n      const API_UPDATEORDER = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/order/${data.id}`\r\n      this.axios\r\n        .put(API_UPDATEORDER, { data })\r\n        .then((res) => {\r\n          if (!res.data.success) {\r\n            this.emitter.emit('sendMsg', {\r\n              message: `訂單更新失敗：${res.data.message}`,\r\n              status: 'error'\r\n            })\r\n            this.isLoading = false\r\n          } else {\r\n            this.emitter.emit('sendMsg', {\r\n              message: '已更新訂單資訊',\r\n              status: 'success'\r\n            })\r\n            this.$refs.orderModal.hideModal()\r\n            this.getOrderList(this.pageInfo.current_page)\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          this.isLoading = false\r\n          this.emitter.emit('sendMsg', {\r\n            message: `訂單更新失敗：${e}`,\r\n            status: 'error'\r\n          })\r\n        })\r\n    }\r\n  },\r\n  created() {\r\n    this.getOrderList()\r\n  }\r\n}\r\n</script>\r\n","<template>\r\n  <LoadingVue :active=\"isLoading\" style=\"z-index: 1056\"/>\r\n  <div class=\"modal fade\" tabindex=\"-1\" ref=\"orderModal\">\r\n    <div class=\"modal-dialog modal-lg modal-dialog-scrollable\">\r\n      <div class=\"modal-content\">\r\n        <div class=\"modal-header bg-secondary\">\r\n          <h1 class=\"modal-title fs-5 text-white\">訂單內容</h1>\r\n          <button type=\"button\" class=\"btn-close\" @click=\"hideModal\"></button>\r\n        </div>\r\n        <div class=\"modal-body text-nowrap\" v-if=\"order.user\">\r\n          <div class=\"m-3 p-3 bg-secondary-subtle rounded overflow-x-auto\">\r\n            <h5 class=\"fw-bolder text-secondary\">訂單總覽</h5>\r\n            <div class=\"d-flex mb-1\">\r\n              <div class=\"me-5\">\r\n                <p class=\"mb-0 me-2 py-1\">\r\n                  <span class=\"fw-bolder pe-3\">訂單狀態</span\r\n                  ><span :class=\"{ 'text-danger': !order.is_paid }\">{{\r\n                    order.is_paid ? '訂單已完成' : '尚未付款'\r\n                  }}</span>\r\n                </p>\r\n                <p class=\"mb-2 mt-1\">\r\n                  <span class=\"fw-bolder pe-3\">訂單日期</span\r\n                  >{{ $filters.unixToDatetime(order.create_at) }}\r\n                </p>\r\n                <p class=\"mb-2\">\r\n                  <span class=\"fw-bolder pe-3\">訂單編號</span>{{ order.id }}\r\n                </p>\r\n              </div>\r\n              <div class=\"d-flex\">\r\n                <p class=\"mb-0 py-1\">\r\n                  <span class=\"fw-bolder pe-3\">修改狀態</span>\r\n                </p>\r\n                <button\r\n                  type=\"button\"\r\n                  class=\"btn btn-sm btn-success py-1 me-2 align-self-start\"\r\n                  :class=\"{ disabled: order.is_paid }\"\r\n                  @click=\"$emit('updateOrder', order)\"\r\n                >\r\n                  已完成\r\n                </button>\r\n                <button\r\n                  type=\"button\"\r\n                  class=\"btn btn-sm btn-danger py-1 align-self-start\"\r\n                  :class=\"{ disabled: !order.is_paid }\"\r\n                  @click=\"$emit('updateOrder', order)\"\r\n                >\r\n                  未完成\r\n                </button>\r\n              </div>\r\n            </div>\r\n            <table class=\"table border-dark mb-2\">\r\n              <thead>\r\n                <tr class=\"text-center\">\r\n                  <th>商品數量</th>\r\n                  <th>小計</th>\r\n                  <th>運費</th>\r\n                  <th>訂單優惠券</th>\r\n                  <th>優惠券折抵</th>\r\n                  <th>總計</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr class=\"text-center\">\r\n                  <td>\r\n                    {{ `共 ${orderItems.reduce((acc, cur) => (acc += cur.qty), 0)} 件` }}\r\n                  </td>\r\n                  <td>\r\n                    {{\r\n                      `${$filters.currency(order.total + couponInfo.total)} 元`\r\n                    }}\r\n                  </td>\r\n                  <td>活動免運</td>\r\n                  <td>{{ couponInfo.title }}</td>\r\n                  <td>{{ `- ${$filters.currency(couponInfo.total)} 元` }}</td>\r\n                  <td>{{ `$ ${$filters.currency(order.total)} 元` }}</td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n          <div class=\"m-3 p-3 bg-secondary-subtle rounded overflow-x-auto\">\r\n            <h5 class=\"fw-bolder text-secondary\">訂購品項</h5>\r\n            <table class=\"table table-hover border-dark mb-2 text-center\">\r\n              <thead>\r\n                <tr>\r\n                  <th>品名</th>\r\n                  <th>產品代碼</th>\r\n                  <th>數量</th>\r\n                  <th>商品特價</th>\r\n                  <th class=\"text-end\">單價</th>\r\n                  <th class=\"text-end\">小計</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr v-for=\"item in orderItems\" :key=\"item.id\">\r\n                  <td>{{ item.product.title }}</td>\r\n                  <td>{{ item.product.id }}</td>\r\n                  <td>{{ item.qty }}</td>\r\n                  <td>\r\n                    {{\r\n                      item.product.price === item.product.origin_price\r\n                        ? '無'\r\n                        : `${Math.floor(\r\n                            (item.product.price / item.product.origin_price) *\r\n                              10\r\n                          )}折`\r\n                    }}\r\n                  </td>\r\n                  <td class=\"text-end\">\r\n                    {{ $filters.currency(item.product.price) }}\r\n                  </td>\r\n                  <td class=\"text-end\">\r\n                    {{ $filters.currency(item.final_total) }}\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n          <div class=\"m-3 p-3 bg-secondary-subtle rounded overflow-x-auto\">\r\n            <h5 class=\"fw-bolder text-secondary\">訂購人資料</h5>\r\n            <div class=\"d-md-flex\">\r\n              <p class=\"mb-0 fw-bolder pe-3 text-nowrap\">配送方式</p>\r\n              <p class=\"mb-2 text-wrap\" style=\"text-align: justify;\">{{ order.user.address }}</p>\r\n            </div>\r\n            <div class=\"d-md-flex\">\r\n              <p class=\"mb-0 fw-bolder pe-3 text-nowrap\">訂單備註</p>\r\n              <p class=\"mb-2 text-wrap\" style=\"text-align: justify;\">{{ order.message ? order.message : '無' }}</p>\r\n            </div>\r\n            <table class=\"table border-dark mb-2 text-center\">\r\n              <thead>\r\n                <tr>\r\n                  <th>姓名</th>\r\n                  <th>連絡電話</th>\r\n                  <th>聯絡信箱</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr>\r\n                  <td>{{ order.user.name }}</td>\r\n                  <td>{{ order.user.tel }}</td>\r\n                  <td>{{ order.user.email }}</td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button type=\"button\" class=\"btn btn-secondary\" @click=\"hideModal\">\r\n            關閉\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Modal from 'bootstrap/js/dist/modal'\r\nexport default {\r\n  data() {\r\n    return {\r\n      modal: {},\r\n      order: {},\r\n      orderItems: [],\r\n      couponInfo: {\r\n        total: '',\r\n        title: ''\r\n      },\r\n      isLoading: false\r\n    }\r\n  },\r\n  props: ['tempOrder'],\r\n  emits: ['updateOrder'],\r\n  watch: {\r\n    tempOrder() {\r\n      this.getData()\r\n    }\r\n  },\r\n  methods: {\r\n    showModal() {\r\n      this.modal.show()\r\n    },\r\n    hideModal() {\r\n      this.modal.hide()\r\n      this.getData()\r\n    },\r\n    getData() {\r\n      this.order = JSON.parse(JSON.stringify(this.tempOrder))\r\n      this.orderItems = Object.values(this.order.products)\r\n      if (this.orderItems[0].coupon) {\r\n        this.couponInfo.total =\r\n          this.order.total / (this.orderItems[0].coupon.percent / 100) -\r\n          this.order.total\r\n        this.couponInfo.title = `${this.orderItems[0].coupon.code} ${this.orderItems[0].coupon.title}`\r\n      } else {\r\n        this.couponInfo.total = 0\r\n        this.couponInfo.title = '無'\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.modal = new Modal(this.$refs.orderModal, { backdrop: 'static' })\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./OrderModal.vue?vue&type=template&id=2b857ea6\"\nimport script from \"./OrderModal.vue?vue&type=script&lang=js\"\nexport * from \"./OrderModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./OrderList.vue?vue&type=template&id=57a80fc0\"\nimport script from \"./OrderList.vue?vue&type=script&lang=js\"\nexport * from \"./OrderList.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementVNode","class","width","role","_createVNode","_component_LoadingVue","active","$data","isLoading","style","_component_OrderModal","tempOrder","onUpdateOrder","$options","updateOrder","ref","_component_DeleteModal","deleteOrder","item","onDelete","deleteId","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","orderList","length","_createElementBlock","_hoisted_5","_Fragment","_renderList","order","key","id","_toDisplayString","_ctx","$filters","unixToDate","create_at","_normalizeClass","is_paid","user","name","Object","values","products","coupon","title","_hoisted_6","currency","total","_hoisted_7","_hoisted_8","type","onClick","$event","editOrder","_hoisted_9","deleteConfirm","_hoisted_10","_component_Pagination","pageInfo","onSetPage","getOrderList","tabindex","_cache","args","hideModal","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","unixToDatetime","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","disabled","$emit","_hoisted_19","_hoisted_20","_hoisted_21","orderItems","reduce","acc","cur","qty","couponInfo","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","product","price","origin_price","Math","floor","_hoisted_27","_hoisted_28","final_total","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","address","_hoisted_34","_hoisted_35","_hoisted_36","message","_hoisted_37","_hoisted_38","tel","email","_hoisted_39","data","modal","props","emits","watch","this","getData","methods","showModal","show","hide","JSON","parse","stringify","percent","code","mounted","Modal","$refs","orderModal","backdrop","__exports__","components","OrderModal","DeleteModal","Pagination","inject","page","window","scrollTo","top","API_GETORDER","axios","get","then","res","success","orders","pagination","emitter","emit","status","catch","e","deleteModal","API_DELETEORDER","delete","current_page","API_UPDATEORDER","put","created","render"],"sourceRoot":""}