"use strict";(self["webpackChunkproject_macaron"]=self["webpackChunkproject_macaron"]||[]).push([[827],{6687:function(t,e,s){s.d(e,{Z:function(){return x}});var i=s(3396),r=s(7139),o=s(9242);const n={class:"py-1 border-top mb-0"},l={class:"d-flex justify-content-between"},c=(0,i._)("p",{class:"mb-1"},"小計",-1),a={class:"mb-1"},d=(0,i._)("div",{class:"d-flex justify-content-between"},[(0,i._)("p",{class:"mb-1"},"運費"),(0,i._)("p",{class:"mb-1"},"活動免運")],-1),u={key:0,class:"input-group mb-2 pt-1"},p={key:1,class:"d-flex justify-content-between flex-wrap"},m={class:"w-100 mb-1"},b={class:"mb-1"},f={class:"mb-1 flex-fill text-end"},g={class:"d-flex justify-content-between border-top pt-1"},w=(0,i._)("p",{class:"mb-1"},"總金額",-1),y={class:"mb-1 fw-bolder"};function _(t,e,s,_,h,k){const v=(0,i.up)("WebLoading");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(v,{"is-loading":h.isLoading},null,8,["is-loading"]),(0,i._)("div",{class:(0,r.C_)(["card mb-5 border-secondary",{"border-0":!s.isEdit}])},[(0,i._)("div",{class:(0,r.C_)(["card-body",{"p-0":!s.isEdit}])},[(0,i._)("h5",{class:(0,r.C_)(["fw-normal",{"fw-bolder ms-2":s.isEdit}])},[(0,i.WI)(t.$slots,"title",{},(()=>[(0,i.Uk)("訂單確認")]))],2),(0,i._)("div",{class:(0,r.C_)(s.isEdit?"px-2":"text-gray")},[(0,i._)("p",n,(0,r.zw)(`商品共 ${s.cartInfo.carts.reduce(((t,e)=>t+e.qty),0)} 件`),1),(0,i._)("div",l,[c,(0,i._)("p",a,(0,r.zw)(t.$filters.currency(s.cartInfo.total)),1)]),d,s.isEdit?((0,i.wg)(),(0,i.iD)("div",u,[(0,i.wy)((0,i._)("input",{type:"text",class:"form-control border-gray border-end-0",placeholder:"輸入優惠碼","onUpdate:modelValue":e[0]||(e[0]=t=>h.couponCode=t)},null,512),[[o.nr,h.couponCode]]),(0,i._)("button",{type:"button",class:"btn btn-outline-gray",onClick:e[1]||(e[1]=(...t)=>k.useCoupon&&k.useCoupon(...t))}," 套用 ")])):(0,i.kq)("",!0),s.cartInfo.carts[0].coupon?((0,i.wg)(),(0,i.iD)("div",p,[(0,i._)("p",m,[(0,i.WI)(t.$slots,"coupon",{},(()=>[(0,i.Uk)("已套用的優惠券：")]))]),(0,i._)("p",b,(0,r.zw)(`${s.cartInfo.carts[0].coupon.code} ${s.cartInfo.carts[0].coupon.title}`),1),(0,i._)("p",f,(0,r.zw)(`-${t.$filters.currency(s.cartInfo.total-s.cartInfo.final_total)}`),1)])):(0,i.kq)("",!0),(0,i._)("div",g,[w,(0,i._)("p",y,(0,r.zw)(`NT$ ${t.$filters.currency(s.cartInfo.final_total)}`),1)])],2),(0,i.WI)(t.$slots,"button")],2)],2)],64)}var h={data(){return{couponCode:"",isLoading:!1}},props:["cartInfo","isEdit"],inject:["emitter"],methods:{useCoupon(){const t="https://vue3-course-api.hexschool.io/api/nn_macaron/coupon";this.isLoading=!0,this.axios.post(t,{data:{code:this.couponCode}}).then((t=>{t.data.success?(this.emitter.emit("sendMsg",{message:"已套用優惠",status:"success"}),this.emitter.emit("updateCart")):this.couponError(t.data.message),this.isLoading=!1})).catch((t=>{this.isLoading=!1,this.couponError(t)}))},couponError(t){this.emitter.emit("sendMsg",{message:t,status:"error"})}}},k=s(89);const v=(0,k.Z)(h,[["render",_]]);var x=v},7061:function(t,e,s){s.d(e,{Z:function(){return H}});var i=s(3396),r=s(7139),o=s(9242);const n={class:"py-2 d-flex align-items-baseline justify-content-between"},l={class:"mb-0 fw-normal"},c={class:"ms-1"},a={class:"list-group rounded-0"},d={class:"d-flex flex-column flex-sm-row"},u={style:{"max-width":"100px"},class:"d-flex align-items-center mb-2 mb-sm-0 me-sm-4"},p=["src","alt"],m={class:"px-0 px-sm-3 w-auto align-self-sm-center"},b={key:0,class:"mt-2 mb-0"},f={key:1,class:"mt-2 mb-0"},g={class:"text-danger"},w={class:"badge rounded-pill bg-graySlight text-dark ms-2",style:{"vertical-align":"baseline"}},y={class:"my-2"},_={key:2,class:"input-group input-group-sm w-auto mb-2"},h=["onClick"],k=(0,i._)("i",{class:"bi bi-dash-lg"},null,-1),v=[k],x={class:"input-group-text bg-white border-start-0 border-end-0 border-gray text-center d-inline-block",style:{"min-width":"50px"}},C=["onClick"],I=(0,i._)("i",{class:"bi bi-plus-lg"},null,-1),$=[I],D={key:3,class:"mb-2"},z={class:"mb-0"},E=["onClick"],q={key:0,class:"position-fixed",style:{"z-index":"1058","backdrop-filter":"blur(5px)",top:"-100vh",height:"300vh",left:"-100vw",width:"300vw"}},j={class:"d-flex flex-column justify-content-center align-items-center h-100"},M={class:"card border px-3 py-1 bg-light shadow-lg",style:{"max-width":"90vw"}},W={class:"card-body text-center p-4"},U=(0,i._)("i",{class:"bi bi-exclamation-triangle-fill opacity-50",style:{"font-size":"4rem",color:"var(--bs-warning)"}},null,-1),N={class:"text-center"};function Z(t,e,s,k,I,Z){const L=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",n,[(0,i._)("h5",l,[(0,i.WI)(t.$slots,"title",{},(()=>[(0,i.Uk)("購物清單")])),(0,i._)("span",c,(0,r.zw)(`(${s.cartInfo.carts.reduce(((t,e)=>t+e.qty),0)})`),1)]),s.isEdit?((0,i.wg)(),(0,i.iD)("a",{key:0,href:"#",class:"link-gray link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover",onClick:e[0]||(e[0]=(0,o.iM)(((...t)=>Z.checkDeleteItem&&Z.checkDeleteItem(...t)),["prevent"]))},"清空購物車")):(0,i.kq)("",!0)]),(0,i._)("ul",a,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.cartInfo.carts,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,r.C_)(["list-group-item d-flex flex-column-reverse flex-sm-row border-gray-subtle border-start-0 border-end-0 px-0",{"text-gray":!s.isEdit}]),key:e.id},[(0,i._)("div",d,[(0,i._)("div",u,[(0,i._)("img",{src:e.product.imageUrl,alt:e.product.title,class:"img-fluid"},null,8,p)]),(0,i._)("div",m,[(0,i.Wm)(L,{to:`/product/${e.product.id}`,class:(0,r.C_)(["link-secondary link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover",{"fw-bolder":s.isEdit}]),target:"_blank"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(e.product.title),1)])),_:2},1032,["to","class"]),e.product.origin_price===e.product.price?((0,i.wg)(),(0,i.iD)("p",b,(0,r.zw)(`單價 NT$ ${t.$filters.currency(e.product.origin_price)}`),1)):((0,i.wg)(),(0,i.iD)("p",f,[(0,i.Uk)(" 單件優惠價 "),(0,i._)("span",g,(0,r.zw)(`NT$ ${t.$filters.currency(e.product.price)}`),1),(0,i._)("span",w,(0,r.zw)(`${Math.floor(e.product.price/e.product.origin_price*10)}折`),1)])),(0,i._)("p",y,(0,r.zw)(`規格：${e.product.unit}`),1),s.isEdit?((0,i.wg)(),(0,i.iD)("div",_,[(0,i._)("button",{type:"button",class:(0,r.C_)(["btn btn-outline-gray",{disabled:1===e.qty}]),onClick:t=>Z.cartAdjustNum({product_id:e.product.id,qty:e.qty-1},e.id)},v,10,h),(0,i._)("span",x,(0,r.zw)(e.qty),1),(0,i._)("button",{type:"button",class:(0,r.C_)(["btn btn-outline-gray",{disabled:10===e.qty}]),onClick:t=>Z.cartAdjustNum({product_id:e.product.id,qty:e.qty+1},e.id)},$,10,C)])):((0,i.wg)(),(0,i.iD)("p",D,(0,r.zw)(`數量：${e.qty}`),1)),(0,i._)("p",z,(0,r.zw)(`小計：${e.total} 元`),1)])]),s.isEdit?((0,i.wg)(),(0,i.iD)("button",{key:0,type:"button",class:"btn-close ms-auto",onClick:t=>Z.checkDeleteItem(e),title:"移除品項"},null,8,E)):(0,i.kq)("",!0)],2)))),128))]),I.showDeleteConfirm?((0,i.wg)(),(0,i.iD)("div",q,[(0,i._)("div",j,[(0,i._)("div",M,[(0,i._)("div",W,[U,(0,i._)("p",null,(0,r.zw)(`確定要${""===I.deleteMsg?"清空購物車":`將"${I.deleteMsg}"從購物車移除`}嗎？`),1),(0,i._)("div",N,[(0,i._)("button",{type:"button",class:"btn btn-outline-danger me-2",onClick:e[1]||(e[1]=(...t)=>Z.deleteItem&&Z.deleteItem(...t))},(0,r.zw)(""===I.deleteMsg?"清空":"移除"),1),(0,i._)("button",{type:"button",class:"btn btn-gray ms-2",onClick:e[2]||(e[2]=t=>I.showDeleteConfirm=!1)}," 取消 ")])])])])])):(0,i.kq)("",!0)],64)}var L={data(){return{showDeleteConfirm:!1,deleteMsg:"",temp:{}}},props:["cartInfo","isEdit"],inject:["emitter"],methods:{cartAdjustNum(t,e){this.emitter.emit("cartAdjustNum",{data:t,cartId:e})},checkDeleteItem(t={}){this.temp=t,t.product?this.deleteMsg=this.temp.product.title:this.deleteMsg="",this.showDeleteConfirm=!0},deleteItem(){this.temp.id?this.emitter.emit("cartDeleteItem",this.temp.id):this.emitter.emit("cartReset"),this.showDeleteConfirm=!1}}},A=s(89);const O=(0,A.Z)(L,[["render",Z]]);var H=O},3827:function(t,e,s){s.r(e),s.d(e,{default:function(){return b}});var i=s(3396);const r={class:"container py-5"},o={key:0,class:"row flex-column-reverse flex-lg-row justify-content-lg-between"},n={class:"col-lg-6"},l={class:"col-lg-4"};function c(t,e,s,c,a,d){const u=(0,i.up)("Orderlist"),p=(0,i.up)("router-link"),m=(0,i.up)("OrderCard");return(0,i.wg)(),(0,i.iD)("div",r,[s.cartInfo.carts[0]?.product?((0,i.wg)(),(0,i.iD)("div",o,[(0,i._)("div",n,[(0,i.Wm)(u,{"cart-info":s.cartInfo,isEdit:!1},null,8,["cart-info"])]),(0,i._)("div",l,[(0,i.Wm)(m,{"cart-info":s.cartInfo,isEdit:!0},{title:(0,i.w5)((()=>[(0,i.Uk)("訂單確認")])),button:(0,i.w5)((()=>[(0,i.Wm)(p,{to:"/order/purchaserData",class:"btn btn-secondary w-100 mt-3"},{default:(0,i.w5)((()=>[(0,i.Uk)("下一步")])),_:1})])),_:1},8,["cart-info"])])])):(0,i.kq)("",!0)])}var a=s(7061),d=s(6687),u={props:["cartInfo"],components:{Orderlist:a.Z,OrderCard:d.Z}},p=s(89);const m=(0,p.Z)(u,[["render",c]]);var b=m}}]);
//# sourceMappingURL=827.b8ea78c7.js.map